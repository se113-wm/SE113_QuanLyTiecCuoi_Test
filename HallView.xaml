<UserControl x:Class="QuanLyTiecCuoi.HallView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:QuanLyTiecCuoi"
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             DataContext="{StaticResource HallViewModel}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Tên trang -->
        <TextBlock Grid.Row="0" Text="Quản lý danh sách sảnh"
                   FontSize="20" FontWeight="Bold"
                   HorizontalAlignment="Center" Margin="10"/>

        <!-- Thông tin chi tiết -->
        <materialDesign:Card Grid.Row="1" Margin="10" Padding="10" BorderThickness="0.5">
            <StackPanel>
                <TextBlock Text="Thông tin chi tiết" FontSize="14" FontWeight="Bold" Margin="0 0 0 10"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="2*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Tên sảnh -->
                    <TextBox Grid.Column="0"
                             Text="{Binding TenSanh, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Tên sảnh"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="5"/>

                    <!-- Loại sảnh (ComboBox) -->
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding HallTypes}"
                              SelectedItem="{Binding SelectedHallType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              DisplayMemberPath="TenLoaiSanh"
                              materialDesign:HintAssist.Hint="Loại sảnh"
                              Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                              Margin="5"/>

                    <!-- Đơn giá bàn tối thiểu (readonly) -->
                    <TextBox Grid.Column="2"
                             Text="{Binding SelectedHallType.DonGiaBanToiThieu, StringFormat=N0}"
                             IsReadOnly="True"
                             materialDesign:HintAssist.Hint="Đơn giá bàn tối thiểu"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="5"/>

                    <!-- Số lượng bàn tối đa -->
                    <TextBox Grid.Column="3"
                             Text="{Binding SoLuongBanToiDa, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             materialDesign:HintAssist.Hint="Số lượng bàn tối đa"
                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                             Margin="5"/>
                </Grid>
                <!-- Ghi chú -->
                <TextBox Text="{Binding GhiChu, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                         materialDesign:HintAssist.Hint="Ghi chú"
                         Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                         Margin="5"/>
            </StackPanel>
        </materialDesign:Card>

        <!-- Nút & tìm kiếm -->
        <materialDesign:Card Grid.Row="2" Margin="10" Padding="10" BorderThickness="0.5">
            <StackPanel>
                <TextBlock Text="Thao tác" FontSize="14" FontWeight="Bold" Margin="0 0 10 0"/>
                <DockPanel LastChildFill="False">
                    <!-- Tìm kiếm -->
                    <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                        <ComboBox Width="200"
                          ItemsSource="{Binding SearchProperties}"
                          SelectedItem="{Binding SelectedSearchProperty, Mode=TwoWay}"
                          Style="{StaticResource MaterialDesignOutlinedComboBox}"
                          materialDesign:HintAssist.Hint="Tìm theo"
                          Margin="5"/>
                        <TextBox Width="300"
                         Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource MaterialDesignOutlinedTextBox}"
                         materialDesign:HintAssist.Hint="Tìm kiếm..."
                         Margin="5"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                        <Button Command="{Binding AddCommand}" Content="Thêm" Margin="5" Width="100"/>
                        <Button Command="{Binding EditCommand}" Content="Sửa" Margin="5" Width="100"/>
                        <Button Command="{Binding DeleteCommand}" Content="Xóa" Margin="5" Width="100"/>
                    </StackPanel>
                </DockPanel>
            </StackPanel>
        </materialDesign:Card>

        <!-- Danh sách loại sảnh -->
        <materialDesign:Card Grid.Row="3" Margin="10" Padding="5" VerticalAlignment="Stretch" BorderThickness="0.5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <!-- Danh sách sẽ chiếm phần còn lại và scroll -->
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="Danh sách loại sảnh" FontSize="14" FontWeight="Bold" Margin="0 0 10 0"/>

                <ListView Grid.Row="1"
                  ItemsSource="{Binding List, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                  SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                  Margin="0"
                  VerticalAlignment="Stretch"
                  HorizontalContentAlignment="Left">
                    <ListView.View>
                        <GridView>
                            <!-- Icon -->
                            <GridViewColumn Width="50">
                                <GridViewColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="" />
                                    </DataTemplate>
                                </GridViewColumn.HeaderTemplate>
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <materialDesign:PackIcon Kind="RadioboxMarked"
                                                         Width="24"
                                                         Height="24"
                                                         VerticalAlignment="Center"
                                                         HorizontalAlignment="Left"
                                                         Foreground="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListViewItem}, Converter={StaticResource BoolToBrushConverter}}"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <!-- Tên sảnh -->
                            <GridViewColumn Header="Tên sảnh" Width="150">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding TenSanh}"  HorizontalAlignment="Left" TextAlignment="Left" Margin="20 0 0 0"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <!-- Loại sảnh -->
                            <GridViewColumn Header="Loại sảnh" Width="200">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding LOAISANH.TenLoaiSanh}"  HorizontalAlignment="Left" TextAlignment="Left" Margin="20 0 0 0"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <!-- Đơn giá bàn tối thiểu -->
                            <GridViewColumn Header="Đơn giá bàn tối thiểu" Width="200">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding LOAISANH.DonGiaBanToiThieu, StringFormat=N0}"  HorizontalAlignment="Left" TextAlignment="Left" Margin="20 0 0 0"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <!-- Số lượng bàn tối đa -->
                            <GridViewColumn Header="Số lượng bàn tối đa" Width="120">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding SoLuongBanToiDa}"  HorizontalAlignment="Left" TextAlignment="Left" Margin="20 0 0 0"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <!-- Ghi chú -->
                            <GridViewColumn Header="Ghi chú" Width="200">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding GhiChu}"  HorizontalAlignment="Left" TextAlignment="Left" Margin="20 0 0 0"/>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Grid>
        </materialDesign:Card>
    </Grid>
</UserControl>
