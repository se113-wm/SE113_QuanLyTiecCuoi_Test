# Test Case TC_BR41_002

## Verify database context is reinitialized via resetDatabaseContext()

| Test Case ID | Test Case Description                                               | PreRequisites                                                                                 | Steps | Steps to Perform                                                                                                                      | Step Expected Result                                                                                                                    | Test Case Expected Result                                                           | Actual Result | Status | Note |
| ------------ | ------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- | ----- | ------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | ------------- | ------ | ---- |
| TC_BR41_002  | Verify database context is reinitialized via resetDatabaseContext() | 1. WMS application is installed<br>2. User is logged in<br>3. Previously accessed other views | 4     | 1. Login and access UserView first<br>2. Make some changes in UserView<br>3. Navigate to HallView<br>4. Verify fresh database context | 1. UserView accessed<br>2. Changes tracked in old context<br>3. HallView opened<br>4. Fresh database context initialized, no stale data | Database context is properly reinitialized when HallView opens to ensure fresh data |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                           |
| ------------------ | ------------------------------- |
| **Test Case ID**   | TC_BR41_002                     |
| **Requirement ID** | BR41                            |
| **Use Case**       | UC 2.1.3.1 - View Hall Details  |
| **Test Type**      | Functional / Context Management |
| **Priority**       | High                            |
| **Automation**     | Manual                          |

### Context Reset Logic

```csharp
public HallViewModel()
{
    _context = App.GetService<WeddingDbContext>();
    ResetDatabaseContext();
    LoadHalls();
}
```

### Detailed Steps

| Step | Steps to Perform                | Step Expected Result               |
| ---- | ------------------------------- | ---------------------------------- |
| 1    | Login and access UserView first | UserView accessed                  |
| 2    | Make some changes in UserView   | Changes tracked in old context     |
| 3    | Navigate to HallView            | HallView opened                    |
| 4    | Verify fresh database context   | Fresh database context initialized |

### Pass/Fail Criteria

| Criteria      | Pass                  | Fail               |
| ------------- | --------------------- | ------------------ |
| Context reset | ✓ New context created | ✗ Stale context    |
| Data fresh    | ✓ Latest DB data      | ✗ Cached data      |
| No conflicts  | ✓ Clean state         | ✗ Entity conflicts |
