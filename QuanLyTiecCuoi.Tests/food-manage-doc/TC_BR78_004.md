# Test Case TC_BR78_004

## Verify image cache copied from "Food/Addcache.jpg" to "Food/[DishId].jpg"

| Test Case ID | Test Case Description                                                     | PreRequisites                                                                                                                              | Steps | Steps to Perform                                                                                                                                        | Step Expected Result                                                                                                                                            | Test Case Expected Result                                              | Actual Result | Status | Note |
| ------------ | ------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------ | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------- | ------------- | ------ | ---- |
| TC_BR78_004  | Verify image cache copied from "Food/Addcache.jpg" to "Food/[DishId].jpg" | 1. WMS application is installed<br>2. User is logged in (Staff/Admin)<br>3. FoodView is displayed in Add mode<br>4. User selected an image | 5     | 1. Select "Thêm" action<br>2. Select an image (saves to Addcache.jpg)<br>3. Enter valid dish data<br>4. Click AddCommand button<br>5. Check Food folder | 1. Add mode activated<br>2. Image saved to "Food/Addcache.jpg"<br>3. Data entered<br>4. Dish created with ID = 10<br>5. "Food/10.jpg" exists with correct image | Image is copied from cache file to permanent location using new DishId |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                      |
| ------------------ | -------------------------- |
| **Test Case ID**   | TC_BR78_004                |
| **Requirement ID** | BR78                       |
| **Use Case**       | UC 2.1.3.12 - Add New Dish |
| **Test Type**      | Functional / File System   |
| **Priority**       | Medium                     |
| **Automation**     | Manual                     |

### Expected File Operations

```csharp
// On image select
SaveToCache("Food/Addcache.jpg");

// After Create() returns new DishId
File.Copy("Food/Addcache.jpg", $"Food/{newDish.DishId}.jpg");
```

### Detailed Steps

| Step | Steps to Perform                        | Step Expected Result                    |
| ---- | --------------------------------------- | --------------------------------------- |
| 1    | Select "Thêm" action                    | Add mode activated                      |
| 2    | Select an image (saves to Addcache.jpg) | Image saved to "Food/Addcache.jpg"      |
| 3    | Enter valid dish data                   | Data entered                            |
| 4    | Click AddCommand button                 | Dish created with ID = 10               |
| 5    | Check Food folder                       | "Food/10.jpg" exists with correct image |

### Pass/Fail Criteria

| Criteria        | Pass                  | Fail            |
| --------------- | --------------------- | --------------- |
| File created    | ✓ [DishId].jpg exists | ✗ No file       |
| Content correct | ✓ Image matches       | ✗ Corrupt/wrong |
| Cache used      | ✓ Addcache.jpg source | ✗ Wrong source  |
