# Test Case TC_BR93_004

## Verify MSG65 when ServiceName already exists

| Test Case ID | Test Case Description                        | PreRequisites                                                                                                     | Steps | Steps to Perform                                                                                                              | Step Expected Result                                                                                                              | Test Case Expected Result                                 | Actual Result | Status | Note |
| ------------ | -------------------------------------------- | ----------------------------------------------------------------------------------------------------------------- | ----- | ----------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | ------------- | ------ | ---- |
| TC_BR93_004  | Verify MSG65 when ServiceName already exists | 1. WMS application is installed<br>2. User is logged in (Staff/Admin)<br>3. Service "Âm thanh" exists in database | 4     | 1. Select "Thêm" action<br>2. Enter ServiceName="Âm thanh" (duplicate)<br>3. Enter UnitPrice="3000000"<br>4. Click Add button | 1. Add mode activated<br>2. Duplicate ServiceName entered<br>3. UnitPrice entered<br>4. MSG65: "Tên dịch vụ đã tồn tại" displayed | System displays MSG65 error when ServiceName is duplicate |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                         |
| ------------------ | ----------------------------- |
| **Test Case ID**   | TC_BR93_004                   |
| **Requirement ID** | BR93                          |
| **Use Case**       | UC 2.1.3.17 - Add New Service |
| **Test Type**      | Negative / Validation         |
| **Priority**       | High                          |
| **Automation**     | Manual                        |

### Message Details

| Code  | Message (Vietnamese)     |
| ----- | ------------------------ |
| MSG65 | "Tên dịch vụ đã tồn tại" |

### Database Constraint

```sql
ServiceName NVARCHAR(40) UNIQUE
```

### Detailed Steps

| Step | Steps to Perform                         | Step Expected Result                      |
| ---- | ---------------------------------------- | ----------------------------------------- |
| 1    | Select "Thêm" action                     | Add mode activated                        |
| 2    | Enter ServiceName="Âm thanh" (duplicate) | Duplicate ServiceName entered             |
| 3    | Enter UnitPrice="3000000"                | UnitPrice entered                         |
| 4    | Click Add button                         | MSG65: "Tên dịch vụ đã tồn tại" displayed |

### Pass/Fail Criteria

| Criteria        | Pass                        | Fail                  |
| --------------- | --------------------------- | --------------------- |
| Duplicate check | ✓ MSG65 displayed           | ✗ No error            |
| No save         | ✓ Record not created        | ✗ Duplicate saved     |
| DB integrity    | ✓ UNIQUE constraint honored | ✗ Constraint violated |
