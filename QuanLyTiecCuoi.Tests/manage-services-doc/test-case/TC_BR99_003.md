# Test Case TC_BR99_003

## Verify unreferenced service can be deleted

| Test Case ID | Test Case Description                      | PreRequisites                                                                                                               | Steps | Steps to Perform                                                                                                            | Step Expected Result                                                                                                         | Test Case Expected Result                   | Actual Result | Status | Note |
| ------------ | ------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------- | ----- | --------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------- | ------------- | ------ | ---- |
| TC_BR99_003  | Verify unreferenced service can be deleted | 1. WMS application is installed<br>2. User is logged in (Staff/Admin)<br>3. Service with no ServiceDetail references exists | 4     | 1. Select service with no bookings<br>2. Select "Xóa" action<br>3. Click Delete button<br>4. Observe reference check result | 1. Unreferenced service selected<br>2. Delete mode activated<br>3. Delete initiated<br>4. No MSG68, proceeds to confirmation | Unreferenced service passes reference check |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                        |
| ------------------ | ---------------------------- |
| **Test Case ID**   | TC_BR99_003                  |
| **Requirement ID** | BR99                         |
| **Use Case**       | UC 2.1.3.19 - Delete Service |
| **Test Type**      | Positive / Database          |
| **Priority**       | High                         |
| **Automation**     | Manual                       |

### Expected Logic

```csharp
var hasReferences = ServiceDetailService.GetByServiceId(serviceId).Any();
if (!hasReferences)
{
    // Proceed to confirmation dialog
}
```

### Detailed Steps

| Step | Steps to Perform                | Step Expected Result               |
| ---- | ------------------------------- | ---------------------------------- |
| 1    | Select service with no bookings | Unreferenced service selected      |
| 2    | Select "Xóa" action             | Delete mode activated              |
| 3    | Click Delete button             | Delete initiated                   |
| 4    | Observe reference check result  | No MSG68, proceeds to confirmation |

### Pass/Fail Criteria

| Criteria      | Pass                       | Fail                  |
| ------------- | -------------------------- | --------------------- |
| Check passes  | ✓ No error message         | ✗ MSG68 shown wrongly |
| Proceeds      | ✓ Goes to confirmation     | ✗ Blocked             |
| Correct logic | ✓ Accurate reference check | ✗ False positive      |
