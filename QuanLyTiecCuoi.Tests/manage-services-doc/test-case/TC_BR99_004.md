# Test Case TC_BR99_004

## Verify delete blocked after MSG68 displayed

| Test Case ID | Test Case Description                       | PreRequisites                                                                                                      | Steps | Steps to Perform                                                                                                            | Step Expected Result                                                                                                                           | Test Case Expected Result                         | Actual Result | Status | Note |
| ------------ | ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ | ----- | --------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------- | ------------- | ------ | ---- |
| TC_BR99_004  | Verify delete blocked after MSG68 displayed | 1. WMS application is installed<br>2. User is logged in (Staff/Admin)<br>3. MSG68 displayed for referenced service | 4     | 1. Select referenced service<br>2. Attempt delete (MSG68 shown)<br>3. Query Service table<br>4. Verify service still exists | 1. Referenced service selected<br>2. MSG68 displayed, delete blocked<br>3. Service table queried<br>4. Service record still exists in database | Delete is blocked and service remains in database |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                        |
| ------------------ | ---------------------------- |
| **Test Case ID**   | TC_BR99_004                  |
| **Requirement ID** | BR99                         |
| **Use Case**       | UC 2.1.3.19 - Delete Service |
| **Test Type**      | Negative / Database          |
| **Priority**       | Critical                     |
| **Automation**     | Manual                       |

### Database Verification

```sql
SELECT COUNT(*) FROM Service WHERE ServiceId = @ServiceId;
-- Should return 1 (still exists)
```

### Detailed Steps

| Step | Steps to Perform             | Step Expected Result                    |
| ---- | ---------------------------- | --------------------------------------- |
| 1    | Select referenced service    | Referenced service selected             |
| 2    | Attempt delete (MSG68 shown) | MSG68 displayed, delete blocked         |
| 3    | Query Service table          | Service table queried                   |
| 4    | Verify service still exists  | Service record still exists in database |

### Pass/Fail Criteria

| Criteria        | Pass                   | Fail               |
| --------------- | ---------------------- | ------------------ |
| Service exists  | ✓ Found in DB          | ✗ Deleted          |
| Data intact     | ✓ All fields preserved | ✗ Data corrupted   |
| References safe | ✓ ServiceDetail valid  | ✗ Orphaned records |
