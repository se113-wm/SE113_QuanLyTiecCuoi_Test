# Test Case TC_BR67_001

## Verify CanDelete() checks if hall type exists in Hall table

| Test Case ID | Test Case Description                                       | PreRequisites                                                                                                                                                     | Steps | Steps to Perform                                                                                                         | Step Expected Result                                                                                                                  | Test Case Expected Result                                                                 | Actual Result | Status | Note |
| ------------ | ----------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----- | ------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | ------------- | ------ | ---- |
| TC_BR67_001  | Verify CanDelete() checks if hall type exists in Hall table | 1. WMS application is installed<br>2. User is logged in (Staff/Admin)<br>3. HallTypeView is displayed in Delete mode<br>4. Hall type "A" has halls referencing it | 4     | 1. Open HallTypeView<br>2. Select "Xóa" action<br>3. Select hall type "A" from DataGrid<br>4. Click DeleteCommand button | 1. HallTypeView displayed<br>2. Delete mode activated<br>3. Hall type "A" selected<br>4. CanDelete() checks Hall table for references | CanDelete() method checks if selected hall type has existing halls before allowing delete |               |        |      |

---

## Test Case Details

### Basic Information

| Attribute          | Value                         |
| ------------------ | ----------------------------- |
| **Test Case ID**   | TC_BR67_001                   |
| **Requirement ID** | BR67                          |
| **Use Case**       | UC 2.1.3.9 - Delete Hall Type |
| **Test Type**      | Functional / Validation       |
| **Priority**       | High                          |
| **Automation**     | Manual                        |

### Expected SQL Check

```sql
SELECT COUNT(*) FROM Hall WHERE HallTypeId = @SelectedHallTypeId
```

### Detailed Steps

| Step | Steps to Perform                   | Step Expected Result                         |
| ---- | ---------------------------------- | -------------------------------------------- |
| 1    | Open HallTypeView                  | HallTypeView displayed                       |
| 2    | Select "Xóa" action                | Delete mode activated                        |
| 3    | Select hall type "A" from DataGrid | Hall type "A" selected                       |
| 4    | Click DeleteCommand button         | CanDelete() checks Hall table for references |

### Pass/Fail Criteria

| Criteria           | Pass                       | Fail            |
| ------------------ | -------------------------- | --------------- |
| FK check performed | ✓ Hall table queried       | ✗ No check      |
| Count correct      | ✓ Accurate reference count | ✗ Wrong count   |
| Logic correct      | ✓ Blocks if refs exist     | ✗ Allows delete |
